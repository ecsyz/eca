// use lazy_static;

// lazy_static! {
//     static ref LANG: Vec<LogLanguage> = generate_language();
// };

// https://github.com/ArtificialQualia/PyEveLiveDPS/blob/master/PyEveLiveDPS/logreader.py
// enum LogLanguage {
//     Russian,
//     English,
//     French,
//     German,
//     Japanese,
//     Chinese,
// }

pub struct LogLanguage {
    language:            String,
    character:           regex::Regex,
    session_time:        regex::Regex,
    damage_out:          regex::Regex,
    damage_in:           regex::Regex,
    armor_repaired_out:  regex::Regex,
    hull_repaired_out:   regex::Regex,
    shield_boosted_out:  regex::Regex,
    armor_repaired_in:   regex::Regex,
    hull_repaired_in:    regex::Regex,
    shield_boosted_in:   regex::Regex,
    cap_transfered_out:  regex::Regex,
    cap_neutralized_out: regex::Regex,
    nos_recieved:        regex::Regex,
    cap_transfered_in:   regex::Regex,
    cap_neutralized_in:  regex::Regex,
    nos_taken:           regex::Regex,
    mined:               regex::Regex,
}

impl LogLanguage {
    pub fn new(
        language: &str,
        character: &str,
        session_time: &str,
        // pilot_and_weapon: &str,
        damage_out: &str,
        damage_in: &str,
        armor_repaired_out: &str,
        hull_repaired_out: &str,
        shield_boosted_out: &str,
        armor_repaired_in: &str,
        hull_repaired_in: &str,
        shield_boosted_in: &str,
        cap_transfered_out: &str,
        cap_neutralized_out: &str,
        nos_recieved: &str,
        cap_transfered_in: &str,
        cap_neutralized_in: &str,
        nos_taken: &str,
        mined: &str,
    ) -> Self {
        Self {
            language:            language.to_string(),
            character:           regex::Regex::new(character).unwrap(),
            session_time:        regex::Regex::new(session_time).unwrap(),
            // pilot_and_weapon:    regex::Regex::new(pilot_and_weapon).unwrap(),
            damage_out:          regex::Regex::new(damage_out).unwrap(),
            damage_in:           regex::Regex::new(damage_in).unwrap(),
            armor_repaired_out:  regex::Regex::new(armor_repaired_out).unwrap(),
            hull_repaired_out:   regex::Regex::new(hull_repaired_out).unwrap(),
            shield_boosted_out:  regex::Regex::new(shield_boosted_out).unwrap(),
            armor_repaired_in:   regex::Regex::new(armor_repaired_in).unwrap(),
            hull_repaired_in:    regex::Regex::new(hull_repaired_in).unwrap(),
            shield_boosted_in:   regex::Regex::new(shield_boosted_in).unwrap(),
            cap_transfered_out:  regex::Regex::new(cap_transfered_out).unwrap(),
            cap_neutralized_out: regex::Regex::new(cap_neutralized_out).unwrap(),
            nos_recieved:        regex::Regex::new(nos_recieved).unwrap(),
            cap_transfered_in:   regex::Regex::new(cap_transfered_in).unwrap(),
            cap_neutralized_in:  regex::Regex::new(cap_neutralized_in).unwrap(),
            nos_taken:           regex::Regex::new(nos_taken).unwrap(),
            mined:               regex::Regex::new(mined).unwrap(),
        }
    }
}

pub fn generate_language() -> Vec<LogLanguage> {
    let mut lang: Vec<LogLanguage> = Vec::with_capacity(6);
    lang.push(LogLanguage::new(
        "english",
        r#"Listener:\s([^\r\n]+)"#,
        r#"Session Started:\s([^\r\n]+)"#,
        r#"to"#,
        r#"from"#,
        r#"remote armor repaired to"#,
        r#"remote hull repaired to"#,
        r#"remote shield boosted to"#,
        r#"remote armor repaired by"#,
        r#"remote hull repaired by"#,
        r#"remote shield boosted by"#,
        r#"remote capacitor transmitted to"#,
        r#"energy neutralized"#,
        r#"energy drained from"#,
        r#"remote capacitor transmitted by"#,
        r#"energy neutralized"#,
        r#"energy drained to"#,
        r#"\(mining\)"#,
    ));

    lang.push(LogLanguage::new(
        "russian",
        r#"Слушатель:\s([^\r\n]+)"#,
        r#"Сеанс начат:\s([^\r\n]+)"#,
        r#"на"#,
        r#"из"#,
        r#"единиц запаса прочности брони отремонтировано"#,
        r#"единиц запаса прочности корпуса отремонтировано"#,
        r#"единиц запаса прочности щитов накачано"#,
        r#"единиц запаса прочности брони получено дистанционным ремонтом от"#,
        r#"единиц запаса прочности корпуса получено дистанционным ремонтом от"#,
        r#"единиц запаса прочности щитов получено накачкой от"#,
        r#"единиц запаса энергии накопителя отправлено в"#,
        r#"энергии нейтрализовано"#,
        r#"энергии извлечено из"#,
        r#"единиц запаса энергии накопителя получено от"#,
        r#"энергии нейтрализовано"#,
        r#"энергии извлечено и передано"#,
        r#"\(mining\)"#,
    ));
    lang.push(LogLanguage::new(
        "french",
        r#"Auditeur:\s([^\r\n]+)"#,
        r#"Session commencée:\s([^\r\n]+)"#,
        r#"à"#,
        r#"de"#,
        r#"points de blindage transférés à distance à"#,
        r#"points de structure transférés à distance à"#,
        r#"points de boucliers transférés à distance à"#,
        r#"points de blindage réparés à distance par"#,
        r#"points de structure réparés à distance par"#,
        r#"points de boucliers transférés à distance par"#,
        r#"points de capaciteur transférés à distance à"#,
        r#"d'énergie neutralisée en faveur de"#,
        r#"d'énergie siphonnée aux dépens de"#,
        r#"points de capaciteur transférés à distance par"#,
        r#"d'énergie neutralisée aux dépens de"#,
        r#"d'énergie siphonnée en faveur de"#,
        r#"\(mining\)"#,
    ));
    lang.push(LogLanguage::new(
        "german",
        r#"Empfänger:\s([^\r\n]+)"#,
        r#"Sitzung gestartet:\s([^\r\n]+)"#,
        r#"nach"#,
        r#"von"#,
        r#"Panzerungs-Fernreparatur zu"#,
        r#"Rumpf-Fernreparatur zu"#,
        r#"Schildfernbooster aktiviert zu"#,
        r#"Panzerungs-Fernreparatur von"#,
        r#"Rumpf-Fernreparatur von"#,
        r#"Schildfernbooster aktiviert von"#,
        r#"Fernenergiespeicher übertragen zu"#,
        r#"Energie neutralisiert"#,
        r#"Energie transferiert von"#,
        r#"Fernenergiespeicher übertragen von"#,
        r#"\(combat\) <.*?ffe57f7f><b>\-([0-9]+).*> Energie neutralisiert <"#,
        r#"Energie transferiert zu"#,
        r#"\(mining\)"#,
    ));
    lang.push(LogLanguage::new(
        "japanese",
        r#"傍聴者:\s([^\r\n]+)"#,
        r#"セッション開始:\s([^\r\n]+)"#,
        r#"対象:"#,
        r#"攻撃者:"#,
        r#"remote armor repaired to"#,
        r#"remote hull repaired to"#,
        r#"remote shield boosted to"#,
        r#"remote armor repaired by"#,
        r#"remote hull repaired by"#,
        r#"remote shield boosted by"#,
        r#"remote capacitor transmitted to"#,
        r#"エネルギーニュートラライズ 対象"#,
        r#"エネルギードレイン 対象"#,
        r#"remote capacitor transmitted by"#,
        r#"のエネルギーが解放されました<"#,
        r#"エネルギードレイン 攻撃者"#,
        r#"\(mining\)"#,
    ));
    lang.push(LogLanguage::new(
        "chinese",
        r#"收听者:\s([^\r\n]+)"#,
        r#"进程开始:\s([^\r\n]+)"#,
        r#"对"#,
        r#"来自"#,
        r#"远程装甲维修量至"#,
        r#"远程结构维修量至"#,
        r#"远程护盾回充增量至"#,
        r#"远程装甲维修量由"#,
        r#"远程结构维修量由"#,
        r#"远程护盾回充增量由"#,
        r#"远程电容传输至"#,
        r#"能量中和"#,
        r#"被从"#,
        r#"远程电容传输量由"#,
        r#"能量中和"#,
        r#"被吸取到"#,
        r#"\(mining\)"#,
    ));

    // lang.push(LogLanguage::new(
    //     "english",
    //     r#"(?<=Listener: ).*"#,
    //     r#"(?<=Session Started: ).*"#,
    //     r#"(?:.*ffffffff>(?P<default_pilot>[^\(\)<>]*)(?:\[.*\((?P<default_ship>.*)\)<|<)/b.*> \-(?: (?P<default_weapon>.*?)(?: \-|<)|.*))"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>to<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>from<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> remote armor repaired to <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> remote hull repaired to <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> remote shield boosted to <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> remote armor repaired by <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> remote hull repaired by <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> remote shield boosted by <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> remote capacitor transmitted to <"#,
    //     r#"\(combat\) <.*?ff7fffff><b>([0-9]+).*> energy neutralized <"#,
    //     r#"\(combat\) <.*?><b>\+([0-9]+).*> energy drained from <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> remote capacitor transmitted by <"#,
    //     r#"\(combat\) <.*?ffe57f7f><b>([0-9]+).*> energy neutralized <"#,
    //     r#"\(combat\) <.*?><b>\-([0-9]+).*> energy drained to <"#,
    //     r#"\(mining\) .*? <.*?><.*?>([0-9]+).*> units of <.*?><.*?>(.+?)<"#
    // ));

    // lang.push(LogLanguage::new(
    //     "russian",r#"(?<=Слушатель: ).*"#,
    //     r#"(?<=Сеанс начат: ).*"#,
    //     r#"(?:.*ffffffff>(?:<localized .*?>)?(?P<default_pilot>[^\(\)<>]*)(?:\[.*\((?:<localized .*?>)?(?P<default_ship>.*)\)<|<)/b.*> \-(?: (?:<localized .*?>)?(?P<default_weapon>.*?)(?: \-|<)|.*))"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>на<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>из<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> единиц запаса прочности брони отремонтировано <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> единиц запаса прочности корпуса отремонтировано <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> единиц запаса прочности щитов накачано <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> единиц запаса прочности брони получено дистанционным ремонтом от <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> единиц запаса прочности корпуса получено дистанционным ремонтом от <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> единиц запаса прочности щитов получено накачкой от <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> единиц запаса энергии накопителя отправлено в <"#,
    //     r#"\(combat\) <.*?ff7fffff><b>([0-9]+).*> энергии нейтрализовано <"#,
    //     r#"\(combat\) <.*?><b>\+([0-9]+).*> энергии извлечено из <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> единиц запаса энергии накопителя получено от <"#,
    //     r#"\(combat\) <.*?ffe57f7f><b>([0-9]+).*> энергии нейтрализовано <"#,
    //     r#"\(combat\) <.*?><b>\-([0-9]+).*> энергии извлечено и передано <"#,
    //     r#"\(mining\) .*? <.*?><.*?>([0-9]+).*(?:<localized .*?>)?(.+)\*<"#
    // ));
    // lang.push(LogLanguage::new(
    //     "french",
    //     r#"(?<=Auditeur: ).*"#,
    //     r#"(?<=Session commencée: ).*"#,
    //     r#"(?:.*ffffffff>(?:<localized .*?>)?(?P<default_pilot>[^\(\)<>]*)(?:\[.*\((?:<localized .*?>)?(?P<default_ship>.*)\)<|<)/b.*> \-(?: (?:<localized .*?>)?(?P<default_weapon>.*?)(?: \-|<)|.*))"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>à<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>de<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> points de blindage transférés à distance à <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> points de structure transférés à distance à <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> points de boucliers transférés à distance à <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> points de blindage réparés à distance par <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> points de structure réparés à distance par <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> points de boucliers transférés à distance par <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> points de capaciteur transférés à distance à <"#,
    //     r#"\(combat\) <.*?ff7fffff><b>([0-9]+).*> d'énergie neutralisée en faveur de <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> d'énergie siphonnée aux dépens de <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> points de capaciteur transférés à distance par <"#,
    //     r#"\(combat\) <.*?ffe57f7f><b>([0-9]+).*> d'énergie neutralisée aux dépens de <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> d'énergie siphonnée en faveur de <"#,
    //     r#"\(mining\) .*? <.*?><.*?>([0-9]+).*(?:<localized .*?>)?(.+)\*<"#,
    // ));
    // lang.push(LogLanguage::new("german",
    //     r#"(?<=Empfänger: ).*"#,
    //     r#"(?<=Sitzung gestartet: ).*"#,
    //     r#"(?:.*ffffffff>(?:<localized .*?>)?(?P<default_pilot>[^\(\)<>]*)(?:\[.*\((?:<localized .*?>)?(?P<default_ship>.*)\)<|<)/b.*> \-(?: (?:<localized .*?>)?(?P<default_weapon>.*?)(?: \-|<)|.*))"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>nach<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>von<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> Panzerungs-Fernreparatur zu <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> Rumpf-Fernreparatur zu <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> Schildfernbooster aktiviert zu <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> Panzerungs-Fernreparatur von <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> Rumpf-Fernreparatur von <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> Schildfernbooster aktiviert von <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> Fernenergiespeicher übertragen zu <"#,
    //     r#"\(combat\) <.*?ff7fffff><b>([0-9]+).*> Energie neutralisiert <"#,
    //     r#"\(combat\) <.*?><b>\+([0-9]+).*> Energie transferiert von <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> Fernenergiespeicher übertragen von <"#,
    //     r#"\(combat\) <.*?ffe57f7f><b>\-([0-9]+).*> Energie neutralisiert <"#,
    //     r#"\(combat\) <.*?><b>\-([0-9]+).*> Energie transferiert zu <"#,
    //     r#"\(mining\) .*? <.*?><.*?>([0-9]+).*(?:<localized .*?>)?(.+)\*<"#,
    // ));
    // lang.push(LogLanguage::new(
    //     "japanese",
    //     r#"(?<=傍聴者: ).*"#,
    //     r#"(?<=セッション開始: ).*"#,
    //     r#"(?:.*ffffffff>(?:<localized .*?>)?(?P<default_pilot>[^\(\)<>]*)(?:\[.*\((?:<localized .*?>)?(?P<default_ship>.*)\)<|<)/b.*> \-(?: (?:<localized .*?>)?(?P<default_weapon>.*?)(?: \-|<)|.*))"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>対象:<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>攻撃者:<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> remote armor repaired to <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> remote hull repaired to <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> remote shield boosted to <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> remote armor repaired by <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> remote hull repaired by <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> remote shield boosted by <"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> remote capacitor transmitted to <"#,
    //     r#"\(combat\) <.*?ff7fffff><b>([0-9]+).*> エネルギーニュートラライズ 対象:<"#,
    //     r#"\(combat\) <.*?><b>\+([0-9]+).*> エネルギードレイン 対象:<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*> remote capacitor transmitted by <"#,
    //     r#"\(combat\) <.*?ffe57f7f><b>([0-9]+).*>のエネルギーが解放されました<"#,
    //     r#"\(combat\) <.*?><b>\-([0-9]+).*> エネルギードレイン 攻撃者:<"#,
    //     r#"\(mining\) .*? <.*?><.*?>([0-9]+).*(?:<localized .*?>)?(.+)\*<"#,
    // ));
    // lang.push(LogLanguage::new(
    //     "chinese",
    //     r#"(?<=收听者: ).*"#,
    //     r#"(?<=进程开始: ).*"#,
    //     r#"(?:.*ffffffff>(?:<localized .*?>)?(?P<default_pilot>[^\(\)<>]*)(?:\[.*\((?:<localized .*?>)?(?P<default_ship>.*)\)<|<)/b.*> \-(?: (?:<localized .*?>)?(?P<default_weapon>.*?)(?: \-|<)|.*))"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>对<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>来自<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>远程装甲维修量至<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>远程结构维修量至<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>远程护盾回充增量至<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>远程装甲维修量由<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>远程结构维修量由<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>远程护盾回充增量由<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>远程电容传输至<"#,
    //     r#"\(combat\) <.*?ff7fffff><b>([0-9]+).*>能量中和<"#,
    //     r#"\(combat\) <.*?><b>\+([0-9]+).*>被从<"#,
    //     r#"\(combat\) <.*?><b>([0-9]+).*>远程电容传输量由<"#,
    //     r#"\(combat\) <.*?ffe57f7f><b>([0-9]+).*>能量中和<"#,
    //     r#"\(combat\) <.*?><b>\-([0-9]+).*>被吸取到<"#,
    //     r#"\(mining\) .*? <.*?><.*?>([0-9]+).*(?:<localized .*?>)?(.+)\*<"#,
    // ));

    lang
}
